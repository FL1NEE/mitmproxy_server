# mitmproxy_server

**Локальный менеджер mitmdump** — `mitmproxy_server`  
Утилита запускает и контролирует несколько локальных экземпляров `mitmdump` (локальных HTTP(S) прокси), каждый из которых перепроксирует трафик через указанный upstream-прокси. Скрипт управляет процессами, валидирует прокси, ведёт логи и показывает статус воркеров.

> **ВАЖНО**: этот инструмент предназначен **только** для законного тестирования, отладки и мониторинга ваших собственных сервисов и проектов. **Не используйте** этот инструмент для попыток обхода мер защиты, атак, или доступа к чужим ресурсам. Автор и я отказываемся от ответственности за любое неправомерное использование.

---

## Ключевая идея

Клиент (ваше приложение или браузер) направляет трафик на **локальный** mitmproxy (например, `127.0.0.1:4444`), а `mitmdump` в свою очередь отправляет запросы дальше через заданный upstream-прокси. Это удобно для:

- локальной отладки HTTPS-трафика (mitmproxy подменяет сертификаты);
- тестирования поведения приложений через разные upstream-прокси;
- записи и анализа трафика в контролируемой среде.

---

## Особенности

- Автоматический запуск/мониторинг нескольких `mitmdump` процессов (по портам из БД).
- Валидация прокси (тестовый запрос через локальный `mitmdump`).
- Маскирование учётных данных в логах.
- Цветное консольное логирование + файл лог (utf-8).
- Периодический короткий статус по всем воркерам.
- Корректное завершение и перезапуск упавших воркеров.
- Простая SQLite-база (`PROXIES.db`) для управления списком upstream-прокси.

---

## Требования

- Python 3.10+ (рекомендуется)
- mitmproxy (mitmdump) — доступен в PATH или укажите полный путь в конфиге
- Библиотеки (pip):
